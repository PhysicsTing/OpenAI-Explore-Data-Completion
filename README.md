# OpenAI-Explore-Data-Completion

This is a simple exploring project to make use of OpenAI LLM API to process and complete previously incomplete Json data.

## Use case scenario

John wants to build an credit card manage application. This application must maintain a list of basic credit card information that looks like:

```
{
    "3470": {
        "name": [
            "RBC Cash Back Mastercard"
        ],
        "bankInfo": {
            "bank": "",
            "brand": "",
            "type": "",
            "bankURL": "",
            "picURL": ""
        },
        "benefits": {
            "description": "Get up to 2% cash back on grocery store purchases, and up to 1% cash back on all other qualifying purchases and pre-authorized payments.",
            "grocery": 2.0,
            "regular": 1.0
        }
    },
    
    "3876": {
        ...
    },
    
    ...
}
```
John already got the name and description information via a web crawler. The problem is that he still need to fill in the rest of the information, such as bank name, the branch of the card etc, but he's tired of writting the crawler. Since the necessary information are alreay there in the description, potentially a LLM such as the ones provided by OpenAI could help.

## Approach

1. There will be dozens of cards in the list, or millions of entries in other use case scenrio, which definitly exceeds OpenAI API's max token limition. So we will need a script to first break the Json data into small trucks, and feed into the API one entry after another.
2. Apparently a prompt is required to instruct the LLM about how to process this data.
3. Apon receiving the response, parse the returned string back into Json. Concat all response togather, and generate the updated file.
4. Since the project is using OpenAI anyway, and John is too lazy to even write the script to parse the Json file, might as well ask OpenAI to write the script directly.

## Files

#### process.py
This file is originally generated by chatGPT withfollowing promot:
> I have a json file called metadata.json. It contains a list of credit card information. Example of this json:
>
> ```< Give two examples of entries from the Json file here >```
>
> As you can see, many fields in bankInfo are empty. I want to ask open AI to complete these fields based on the description strings, however my files are very long and cannot be passed into openAI api as a whole file. Therefore, I want you to write me a wrapper script, that uses the openAI API. This script will:
>
> 1. Read this metadata.json file
> 2. Break this json file into mutiple pieces. Apparently each individual card will be its own piece.
> 3. Call openAI api, and pass in each piece one at a time
> 4. For each API call, ask openAI api to fill in the bankInfo section based on the description. The bankURL and picURL and be empty. The brand will be either amex card, or master card, or visa. the type is based on what kind of reward it provideds, for exaple cashback, or reword point.
> 5. Collect the returned otput, and concat them into a new json file
>
> The new json file should be almost the same as the original one, except more fields are filled in.

A few modification was done after the first generation. Mainly the prompt string are modified to be more specific, and the step of parsing the returned string into Json object are easily broken because the response from API are not always a strict Json format.

#### metadata.json

The original incomplete data which contains information about 50+ credit card used in Canada.

#### updated_metadata.json

Newly generated json with empty fields filled in by OpenAI LLM via process.py 
